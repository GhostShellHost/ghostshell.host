<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GhostShell Registry — Public Registry</title>
  <style>
    :root{
      --bg:#0a0a0d;
      --text:#f2f2f5;
      --soft:#b2b2bb;
      --muted:#7b7b86;
      --line:#272730;
      --accent:#9da3ff;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      min-height:100vh;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text);
      background: radial-gradient(900px 520px at 50% -120px, rgba(157,163,255,.16), transparent 60%), var(--bg);
      padding:24px;
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
    }
    main{width:min(760px,100%);text-align:center;margin:0 auto;padding-top:min(10vh,84px)}
    .brand{
      display:inline-block;
      font-size:.78rem;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--soft);
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px 12px;
      margin-bottom:16px;
      background:rgba(255,255,255,.01);
    }
    h1{margin:0;font-size:clamp(34px,6vw,58px);line-height:1.05;letter-spacing:-.02em;font-weight:740}
    .note{margin:12px auto 0;max-width:56ch;color:var(--soft)}

    form{margin:26px auto 0;max-width:560px;display:grid;gap:10px}
    input{
      width:100%;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:12px 13px;
      font:inherit;
      text-align:center;
      font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    }
    input::placeholder{color:var(--muted)}
    button{
      justify-self:center;
      margin-top:6px;
      border-radius:999px;
      border:1px solid var(--accent);
      background:var(--accent);
      color:#0a0a0d;
      padding:10px 20px;
      font:inherit;
      font-weight:620;
      cursor:pointer;
    }
    .small{
      margin:20px auto 0;
      max-width:64ch;
      color:var(--muted);
      font-size:.9rem;
      text-align:center;
      border-top:1px solid var(--line);
      padding-top:14px;
    }
    a{color:var(--accent);text-decoration:none;border-bottom:1px solid #4a4a7a}
    a:hover{border-bottom-color:var(--accent)}
    .back{margin-top:16px}
    .vtag{color:var(--muted);font-size:.9rem}
  </style>
</head>
<body>
  <main>
    <div class="brand">ghostshell.host • public registry</div>
    <h1>Public Registry</h1>

    <div id="result" style="display:block;margin:18px auto 0;max-width:920px">
      <div id="cert-frame-wrap" style="border-radius:18px;overflow:hidden;box-shadow:0 24px 80px rgba(0,0,0,.45);transform:translateZ(0)">
        <iframe id="cert-frame" title="GhostShell public record" style="display:block;width:100%;height:480px;border:0;background:transparent"></iframe>
      </div>
    </div>

    <p class="note">Paste a public registry record ID.</p>

    <form id="registry-form" aria-label="Registry search">
      <input id="record-id" name="id" aria-label="Registry Record ID" type="text" value="" placeholder="e.g. GS-BC-A-26-H" required />
      <button type="submit">Search</button>
    </form>

    <p class="small" style="border-top:none;padding-top:0;margin-top:16px">
      Showing public record for: <span id="shown-id" style="font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace"></span>
      <br/>
      This is the <b>shareable public link</b>. Full certificates are only available to the registrant via their private download link.
    </p>

    <p class="small">Unredacted certificates are only available to the registrant via emailed link.</p>
    <p class="back"><a href="/">Back home</a> &nbsp; <a href="/issue/">Buy Certificate</a> &nbsp; <span class="vtag">v0.022</span></p>
  </main>

  <script>
    (function () {
      const form = document.getElementById('registry-form');
      const input = document.getElementById('record-id');
      const shownId = document.getElementById('shown-id');
      const frame = document.getElementById('cert-frame');

      const params = new URLSearchParams(window.location.search);
      const DEFAULT_ID = 'GS-BC-A-26-H';
      const normalize = (s) => (s || '').toString().trim().toUpperCase();

      const initial = normalize(params.get('id') || DEFAULT_ID);
      input.value = initial;
      shownId.textContent = initial;
      frame.src = '/cert/' + encodeURIComponent(initial) + '?embed=1';

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        const id = normalize(input.value);
        if (!id) return;
        // Teaching mode: keep user on /registry/, fill box, and show the record above.
        const nextUrl = '/registry/?id=' + encodeURIComponent(id);
        window.history.replaceState({}, '', nextUrl);
        shownId.textContent = id;
        frame.src = '/cert/' + encodeURIComponent(id) + '?embed=1';
      });
    })();
  </script>

</body>
</html>
