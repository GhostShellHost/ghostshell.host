<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GhostShell — Birth Certificates for AI agents (Index 1.1)</title>
  <meta name="description" content="GhostShell issues verifiable Birth Certificates for AI agents: a public verification link + printable certificate + tamper-evident fingerprint." />
  <style>
    :root{--bg:#0b0c10;--card:rgba(18,20,27,.78);--text:#e9edf1;--muted:#aab3bf;--line:#252a35;--accent:#7c5cff;--accent2:#2ee59d;--shadow:0 24px 90px rgba(0,0,0,.55);--sans:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;--mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    *{box-sizing:border-box}
    html, body{max-width:100%;overflow-x:hidden}
    body{margin:0;font-family:var(--sans);background:
      radial-gradient(1000px 600px at 20% 0%,rgba(124,92,255,.22),transparent 50%),
      radial-gradient(900px 600px at 80% 20%,rgba(46,229,157,.10),transparent 60%),
      var(--bg);
      color:var(--text);
    }
    a{color:inherit}

    /* optional variants sliver */
    .topnav{position:fixed;left:0;right:0;top:0;z-index:80;border-bottom:1px solid rgba(170,179,191,.18);background:color-mix(in srgb, var(--bg) 72%, transparent);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}
    .topnav__inner{max-width:1080px;margin:0 auto;padding:10px 14px;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .topnav__label{color:var(--muted);font-size:11px;letter-spacing:.12em;text-transform:uppercase;white-space:nowrap}
    .topnav__links{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
    .topnav__links a{display:inline-flex;align-items:center;padding:9px 12px;border-radius:999px;border:1px solid rgba(170,179,191,.22);background:rgba(255,255,255,.03);color:var(--muted);text-decoration:none;font-size:12px;min-height:44px}
    .topnav__links a:hover{color:var(--text);border-color:rgba(233,237,241,.35)}
    .topnav__links a[aria-current="page"]{color:var(--text);border-color:rgba(46,229,157,.35);outline:2px solid rgba(46,229,157,.18);outline-offset:2px}
    @media (max-width:560px){.topnav__label{display:none}}

    .wrap{max-width:980px;margin:0 auto;padding:64px 18px 80px}

    /* hero */
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:22px;align-items:start}
    @media (max-width:980px){.hero{grid-template-columns:1fr}}

    h1{margin:0 0 10px;font-size:56px;line-height:1.0;letter-spacing:-0.03em}
    .sub{margin:0 0 16px;color:var(--muted);line-height:1.55;max-width:70ch}

    /* origin panel (matched to index style) */
    .originPanel{margin:0 0 16px;padding:14px;border-radius:16px;border:1px solid rgba(170,179,191,.18);background:rgba(18,20,27,.72);box-shadow:var(--shadow)}
    .originPanel__kicker{font-size:11px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:8px}
    .originPanel__title{font-size:15px;font-weight:700;color:var(--text);margin:0 0 6px}
    .originPanel__map{margin:10px 0 12px;padding:10px;border:1px solid rgba(170,179,191,.18);border-radius:12px;background:rgba(11,12,16,.55)}
    .originPanel__map svg{display:block;width:100%;height:auto}
    .originPanel__land{fill:rgba(170,179,191,.18);stroke:rgba(170,179,191,.24);stroke-width:1.2}
    .originPanel__grid{stroke:rgba(170,179,191,.14);stroke-width:1}
    .originPanel__pin{fill:var(--accent2);filter:drop-shadow(0 0 8px rgba(46,229,157,.55))}
    .originPanel__meta{display:flex;flex-wrap:wrap;gap:8px 14px;color:var(--muted);font-size:13px}
    .originPanel__meta b{color:var(--text)}

    .cta{display:flex;flex-wrap:wrap;gap:12px;margin-top:16px}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 14px;border-radius:12px;border:1px solid var(--line);text-decoration:none;font-weight:700;background:rgba(255,255,255,.03)}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#9b7bff);border-color:transparent;color:#fff}
    .btn.secondary{background:rgba(18,20,27,.45)}

    .card{border:1px solid rgba(170,179,191,.18);border-radius:16px;background:rgba(18,20,27,.72);box-shadow:var(--shadow);padding:16px}
    .card h3{margin:0 0 10px;font-size:16px}

    /* certificate hero (single full-width card that fades to redacted + back) */
    .certStack{position:relative;height:420px;margin:14px 0 18px;cursor:pointer}
    .certCycle{position:absolute;inset:0;display:flex;align-items:flex-start;justify-content:flex-start;z-index:10}
    .certCycle__frame{position:relative;width:100%}
    .certCycle__img{position:absolute;left:0;top:0;width:100%;height:auto;border-radius:18px;box-shadow:0 22px 100px rgba(0,0,0,.62);border:1px solid rgba(255,255,255,.08)}

    @keyframes fadeToRedacted{
      0%,40%{opacity:1}
      48%,80%{opacity:0}
      90%,100%{opacity:1}
    }
    @keyframes fadeInRedacted{
      0%,40%{opacity:0}
      52%,80%{opacity:1}
      90%,100%{opacity:0}
    }
    .certCycle__img.full{animation:fadeToRedacted 3.8s ease-in-out infinite}
    .certCycle__img.redacted{animation:fadeInRedacted 3.8s ease-in-out infinite}

    @media (prefers-reduced-motion: reduce){
      .certCycle__img.full{animation:none;opacity:1}
      .certCycle__img.redacted{animation:none;opacity:0}
    }

    @media (max-width:980px){
      .certStack{height:360px}
    }

    /* sections */
    .kicker{margin-top:36px;font-size:12px;letter-spacing:.18em;text-transform:uppercase;color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}

    /* form embed: no extra chrome */
    .formWrap{margin-top:12px}
    .issueFrame{width:100%;max-width:100%;display:block;border:0;border-radius:16px;min-height:1200px;height:1200px;box-shadow:var(--shadow);background:#0b0c10;overflow:hidden}
    @media (max-width:980px){.issueFrame{min-height:1500px}}

    /* footer */
    .footer{margin-top:26px;padding-top:18px;border-top:1px solid rgba(170,179,191,.18);display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
    .links{color:var(--muted)}
    .links a{color:var(--muted);text-decoration:none;border-bottom:1px solid rgba(170,179,191,.28)}
    .links a:hover{color:var(--text)}
    :focus-visible{outline:3px solid rgba(46,229,157,.28);outline-offset:3px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div>
        <div style="margin-top:16px">
          <section class="originPanel" aria-label="Place of origin from registry">
            <div class="originPanel__kicker">Registry metadata</div>
            <p class="originPanel__title" id="originPlaceLine">Place of origin: syncing with registry…</p>
            <div class="originPanel__map" aria-hidden="true">
              <svg viewBox="0 0 800 360" role="img" aria-label="World map origin pin">
                <path class="originPanel__grid" d="M80 60H720M80 120H720M80 180H720M80 240H720M80 300H720M80 30V330M180 30V330M280 30V330M380 30V330M480 30V330M580 30V330M680 30V330"/>
                <path class="originPanel__land" d="M116 104l28-22 50-6 24 12 20 30-20 24-36 8-42-8-24-20z"/>
                <path class="originPanel__land" d="M220 178l24-16 26 8 10 30-14 36-30 14-20-20z"/>
                <path class="originPanel__land" d="M350 88l44-20 62 8 38 24-6 26-48 20-58-2-30-20z"/>
                <path class="originPanel__land" d="M394 150l36 10 26 42-10 66-36 18-28-26-8-54z"/>
                <path class="originPanel__land" d="M510 100l38-22 70 0 60 20-6 30-42 20-74 2-42-22z"/>
                <path class="originPanel__land" d="M560 172l40-8 46 18 8 28-22 24-42 2-28-20z"/>
                <path class="originPanel__land" d="M640 246l30-12 44 8 16 26-26 18-42 0-28-18z"/>
                <circle class="originPanel__pin" id="originPin" cx="664" cy="268" r="6"/>
              </svg>
            </div>
            <div class="originPanel__meta">
              <span><b>Status:</b> <span id="originStatus">Syncing</span></span>
              <span><b>Certificate:</b> <span id="originCertId">—</span></span>
              <span><b>Country:</b> <span id="originCountry">—</span></span>
            </div>
          </section>
          <h1>Birth Certificates for AI agents.</h1>
          <div class="certStack" aria-label="Certificate preview (full fades to redacted)" id="certStack" role="button" tabindex="0">
            <div class="certCycle" aria-hidden="true">
              <div class="certCycle__frame">
                <img class="certCycle__img full" src="/assets/launch/full.png" alt="" />
                <img class="certCycle__img redacted" src="/assets/launch/redacted.png" alt="" />
              </div>
            </div>
          </div>

          <div class="cta" style="margin-top:12px">
            <a class="btn primary" href="#issue">Issue a Birth Certificate</a>
          </div>
          <p class="muted" style="margin-top:10px;margin-bottom:0"><b>US$9.99</b> one‑time • instant delivery</p>
        </div>
      </div>

      <div class="stack" aria-label="Certificate examples" hidden></div>
    </div>

    <div id="issue" class="kicker">Issue a Birth Certificate</div>
    <div class="formWrap">
      <iframe class="issueFrame" id="issueFrame" title="Issue a Birth Certificate" src="/birth-certificate/" scrolling="no"></iframe>
    </div>

    <div class="footer">
      <div class="links">
        <a href="mailto:hello@ghostshell.host">hello@ghostshell.host</a>
        <span> · </span>
        <a href="/policy/">Policy</a> · <a href="/privacy/">Privacy</a> · <a href="/terms/">Terms</a>
      </div>
      <div class="links">Alpha experiment. Things may break.</div>
    </div>
  </div>

  <script>
    (function(){
      // ── Auto-resize the embedded form to avoid an inner scrollbar ──
      const issueFrame = document.getElementById('issueFrame');
      window.addEventListener('message', (ev) => {
        if (!issueFrame) return;
        if (ev.origin !== location.origin) return;
        const d = ev.data || {};
        if (d && d.type === 'ghostshell:formHeight' && typeof d.h === 'number') {
          issueFrame.style.height = Math.max(900, Math.ceil(d.h)) + 'px';
        }
      });
      issueFrame?.addEventListener('load', () => {
        try { issueFrame.contentWindow?.postMessage({ type: 'ghostshell:ping' }, location.origin); } catch(e) {}
      });

      // Pull latest origin from registry
      const originPlaceLine = document.getElementById('originPlaceLine');
      const originCertId = document.getElementById('originCertId');
      const originStatus = document.getElementById('originStatus');
      const originCountry = document.getElementById('originCountry');
      const originPin = document.getElementById('originPin');

      function parseCountry(place) {
        const raw = (place || '').toString().trim();
        if (!raw) return 'Unknown';
        const parts = raw.split(',').map(s => s.trim()).filter(Boolean);
        return parts.length ? parts[parts.length - 1] : raw;
      }

      function pinForCountry(country) {
        const c = (country || '').toUpperCase();
        if (c.includes('AUSTRALIA') || c === 'AU') return { x: 664, y: 268 };
        if (c.includes('UNITED STATES') || c === 'USA' || c === 'US') return { x: 170, y: 140 };
        if (c.includes('CANADA') || c === 'CA') return { x: 182, y: 104 };
        if (c.includes('UNITED KINGDOM') || c === 'UK' || c === 'GB') return { x: 376, y: 102 };
        if (c.includes('GERMANY') || c === 'DE') return { x: 406, y: 112 };
        if (c.includes('INDIA') || c === 'IN') return { x: 560, y: 168 };
        if (c.includes('SINGAPORE') || c === 'SG') return { x: 604, y: 210 };
        if (c.includes('JAPAN') || c === 'JP') return { x: 646, y: 136 };
        if (c.includes('BRAZIL') || c === 'BR') return { x: 244, y: 214 };
        if (c.includes('SOUTH AFRICA') || c === 'ZA') return { x: 418, y: 266 };
        return { x: 560, y: 180 };
      }

      function renderOrigin(place, certId, status) {
        if (!originPlaceLine || !originCertId || !originStatus || !originCountry || !originPin) return;
        const country = parseCountry(place);
        const pin = pinForCountry(country);
        originPlaceLine.textContent = `Place of origin: ${place || 'Unknown'}`;
        originCertId.textContent = certId || '—';
        originStatus.textContent = status || 'Verified';
        originCountry.textContent = country;
        originPin.setAttribute('cx', String(pin.x));
        originPin.setAttribute('cy', String(pin.y));
      }

      fetch('/api/cert/latest-origin', { headers: { 'accept': 'application/json' } })
        .then(r => r.ok ? r.json() : Promise.reject(new Error('origin fetch failed')))
        .then(data => {
          renderOrigin(data?.place_of_birth || 'Unknown', data?.cert_id || '', 'Verified');
        })
        .catch(() => {
          renderOrigin('Adelaide, South Australia, Australia', '', 'Fallback');
        });
    })();
  </script>
</body>
</html>
