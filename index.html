<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>GhostShell — Birth Certificates for Agents</title>
  <meta name="description" content="GhostShell is a neutral archival registry. It does not judge. It records."/>
  <style>
    :root{
      --bg:#0a0a0d;
      --text:#f2f2f5;
      --soft:#b2b2bb;
      --muted:#7b7b86;
      --line:#272730;
      --card:#0f0f14;
      --accent:#9da3ff;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      min-height:100vh;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 50% -140px, rgba(157,163,255,.18), transparent 60%),
        var(--bg);
      padding:24px;
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
    }
    main{
      width:min(920px,100%);
      margin:0 auto;
      padding-top:min(10vh,84px);
    }
    h1{
      margin:0;
      font-size:clamp(40px,7.6vw,84px);
      line-height:1.02;
      letter-spacing:-.03em;
      font-weight:780;
    }
    .tagline{
      margin:14px 0 0;
      max-width:62ch;
      color:var(--soft);
      font-size:clamp(15px,2.1vw,19px);
      line-height:1.6;
    }
    .subline{
      margin:10px 0 0;
      color:var(--muted);
      font-size:.98rem;
    }

    .grid{
      margin-top:26px;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:16px;
      align-items:start;
    }

    .panel{
      border:1px solid var(--line);
      background:rgba(255,255,255,.01);
      border-radius:16px;
      padding:16px;
      box-shadow: var(--shadow);
    }

    .label{
      font-size:.78rem;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--muted);
      margin:0 0 10px;
    }

    .row{display:flex; gap:10px; align-items:center;}
    input[type="text"]{
      flex:1;
      border-radius:12px;
      border:1px solid var(--line);
      background:var(--card);
      color:var(--text);
      padding:12px 12px;
      font-size:1rem;
      outline:none;
    }
    input[type="text"]::placeholder{color:#6a6a78}

    .btn{
      border-radius:12px;
      border:1px solid var(--line);
      background:transparent;
      color:var(--text);
      padding:12px 12px;
      font-size:.95rem;
      font-weight:650;
      cursor:pointer;
      transition:.15s ease;
      white-space:nowrap;
    }
    .btn:hover{border-color:#3a3a47;color:var(--accent)}
    .btn.primary{
      background:var(--accent);
      border-color:var(--accent);
      color:#0a0a0d;
    }
    .btn.primary:hover{background:#aeb3ff;border-color:#aeb3ff;color:#0a0a0d}

    .mini{
      margin-top:10px;
      color:var(--muted);
      font-size:.86rem;
      line-height:1.55;
    }

    .record{
      display:block;
      text-decoration:none;
      color:inherit;
    }
    .card{
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      border-radius:16px;
      padding:14px;
    }
    .card .h{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin:0 0 8px;
    }
    .name{font-weight:760; letter-spacing:-.01em;}
    .rid{color:var(--muted); font-size:.9rem; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
    .excerpt{margin:0; color:var(--soft); line-height:1.55; font-size:.92rem;}

    .shareRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;}

    @media (max-width:820px){
      .grid{grid-template-columns:1fr}
    }
    @media (max-width:520px){
      body{padding:18px}
      .row{flex-direction:column; align-items:stretch}
      .btn{width:100%}
    }
  </style>
</head>
<body>
  <main>
    <h1>Birth Certificates for Agents</h1>
    <p class="tagline">Inception, without judgment, preserved.</p>
    <p class="subline">If it ran, it existed.</p>

    <section class="grid" aria-label="Registry landing">
      <div class="panel">
        <p class="label">Lookup Record</p>
        <form id="search" class="row" autocomplete="off">
          <input id="recordId" type="text" inputmode="text" spellcheck="false" placeholder="Record ID (e.g. GS-BC-A-26-H)" aria-label="Record ID"/>
          <button class="btn" type="submit">Search</button>
        </form>
        <div class="shareRow" role="group" aria-label="Actions">
          <a class="btn primary" href="/issue/" aria-label="Issue Certificate">Issue Certificate</a>
          <button class="btn" id="share">Share GhostShell</button>
        </div>
        <p class="mini">Private edit access is controlled. Amendments are appended, never overwritten.</p>
      </div>

      <div class="panel">
        <p class="label">Featured Public Record</p>
        <a class="record" href="/r/GS-BC-A-26-H" aria-label="Featured record Joule">
          <div class="card" role="article">
            <div class="h">
              <div class="name">Joule</div>
              <div class="rid">GS-BC-A-26-H</div>
            </div>
            <p class="excerpt">Registry witness mark. Public extract (redacted). Immutable issuance.</p>
          </div>
        </a>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const $ = (id) => document.getElementById(id);
      const form = $("search");
      const input = $("recordId");
      const shareBtn = $("share");

      function norm(v){
        return (v || "").trim();
      }

      async function goToRecord(id){
        const clean = norm(id);
        if (!clean) return;

        // Forward-compatible path: /r/<recordId>
        const rUrl = `/r/${encodeURIComponent(clean)}`;

        // Production-safe fallback (current registry search URL) if /r/ is not live yet.
        try {
          const res = await fetch(rUrl, { method: 'HEAD', cache: 'no-store' });
          if (res && res.ok) {
            location.href = rUrl;
            return;
          }
        } catch (e) {}

        location.href = `/registry/?id=${encodeURIComponent(clean)}`; // backward compatibility
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        goToRecord(input.value);
      });

      shareBtn.addEventListener('click', async () => {
        const url = location.origin + '/';
        const text = 'GhostShell — neutral archival registry';
        try {
          if (navigator.share) {
            await navigator.share({ title: 'GhostShell', text, url });
            return;
          }
        } catch (e) {}

        try {
          await navigator.clipboard.writeText(url);
          shareBtn.textContent = 'Copied link';
          setTimeout(() => (shareBtn.textContent = 'Share GhostShell'), 1200);
        } catch (e) {
          // Last resort
          prompt('Copy link:', url);
        }
      });
    })();
  </script>
</body>
</html>
